<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <meta name="apple-mobile-web-app-capable" content="yes">
      <title>OpenLayers GML Layer Example</title>
	<script src="http://api-maps.yandex.ru/1.0/?key=ADSyKU8BAAAAD-VBCwIA5ak5VGynqt5xp2tzedBMfAmF8-kAAAAAAAAAAAD_nM6wtAPq97uJHRvkF_aJL3gRVQ==&modules=pmap" type="text/javascript"></script>
    <script src="lib/lib/OpenLayers.js"></script>
	<script src="lib/OL_Yandex.js" type="text/javascript"></script>
	<script src="lib/proj4js-compressed.js" type="text/javascript"></script>
    <script type="text/javascript">
        var lon = 5;
        var lat = 40;
        var zoom = 5;
        var map, layer;

        function init(){
			var options = {
	    		projection: new OpenLayers.Projection("EPSG:900913"), //-this is Mercator. Geodetic is projection:"WGS84",
				units: "m",//m
				numZoomLevels:18,
				displayProjection: new OpenLayers.Projection("EPSG:4326"),
            	maxResolution: 156543.0339,
            	maxExtent: new OpenLayers.Bounds(-20037508, -20037508, 20037508, 20037508.34),
				controls:[]
			}; 
            map = new OpenLayers.Map('map', options);
			var Y_map = new OpenLayers.Layer.Yandex("Яndex",{sphericalMercator: true});
			var Y_hyb = new OpenLayers.Layer.Yandex("Яndex (гибрид)",{type:YMaps.MapType.HYBRID, sphericalMercator:true});
			var Y_sat = new OpenLayers.Layer.Yandex("Яndex (спутниковый)",{type:YMaps.MapType.SATELLITE, sphericalMercator:true});
			map.addLayer(Y_map);
			map.setBaseLayer(Y_map);
			map.addLayer(Y_hyb);
			map.addLayer(Y_sat);
            //map.zoomToExtent(new OpenLayers.Bounds(-3.922119,49.335327,4.866943,59.553833));
			//if(map.baseLayer.forwardMercator)       	 
			var lonlat = new OpenLayers.LonLat(47.57138, 59.8384);
			lonlat.transform(new OpenLayers.Projection("EPSG:4326"), new OpenLayers.Projection("EPSG:900913"));
			map.setCenter(lonlat, 4);
            	//map.setCenter(map.baseLayer.forwardMercator(8,52),3);
            //else
            	//map.setCenter(new OpenLayers.LonLat(8,52),5);
            /*map.addLayer(new OpenLayers.Layer.Vector("GML", {
                protocol: new OpenLayers.Protocol.HTTP({
                    url: "polygon.xml",
                    format: new OpenLayers.Format.GML()
                }),
                strategies: [new OpenLayers.Strategy.Fixed()],
				projection: new OpenLayers.Projection("EPSG:4326")
            }));*/
			map.addControl(new OpenLayers.Control.PanZoomBar());                  		
         	map.addControl(new OpenLayers.Control.LayerSwitcher());
         	map.addControl(new OpenLayers.Control.Navigation());
			map.addControl(new OpenLayers.Control.LayerSwitcher());
			map.addControl(new OpenLayers.Control.MousePosition());
			
			/*map.addLayer(new OpenLayers.Layer.Vector("Regions", {
				strategies: [new OpenLayers.Strategy.BBOX()],
				protocol: new OpenLayers.Protocol.HTTP({
					url: "oblasts_simplified.xml",
					params: {
						format: "WFS",
						service: "WFS",
						request: "GetFeatures",
						srs: "EPSG:4326"
					},
					format: new OpenLayers.Format.GML()
				}),
				projection: new OpenLayers.Projection("EPSG:4326")
			}));*/
			var tlayer = new OpenLayers.Layer.GML("GML", "http://localhost/oblasts_simplified.xml", {projection: new OpenLayers.Projection("EPSG:4326")});
			map.addLayer(tlayer);

        }
    </script>
  </head>
  <body onload="init()">
      <h1 id="title">GML Layer Example</h1>

      <div id="tags">
        GML
      </div>

      <p id="shortdesc">
          Loads locally stored GML vector data on a basemap. Includes GML example file.
      </p>

    <div id="map" class="smallmap" style="height: 400px; border: 1px solid black;"></div>

    <div id="docs"></div>
  </body>
</html>